{% extends "base.html" %}

{% block content %}
    {% load namify %}
    {% block category %}
    <ul>
        {% for i in categories %}
            {% if i.is_root_node %}
               <li><a href="/category/{{ i.get_slug_list }}"><b>{{ i.get_slug_list | get_name }}</b></a></li>
            {% else %}
               <li><a href="/category/{{ i.get_slug_list }}">{{ i.get_slug_list | get_name }}</a></li>
            {% endif %}
        {% endfor %}

    </ul>
    {% endblock %}
<h4>Items {% if user.is_authenticated %}, <a href="{% url 'classified_ads:new_item' %}">New Item!</a> {% endif %}</h4>

<div>
    {% for i in items %}
    <div style="border:1px solid black;">
        <a href="{% url 'classified_ads:item_info' i.id %}">
            <div>
                <strong>{{ i.name }}</strong>
            </div>
        </a>
        <div>
            <small>{{ i.category}}</small>
            <p><strong>Price: {% if i.price %} {{ i.price }} $ {% endif %}
                 {% if i.negotiable %} negotiable {% endif %} </strong></p>
            <p>{{ i.user.username }}</p>
        </div>
        <div>
            {% if user.is_authenticated %}
                {% if i.user == user %}
                    <a href="{% url 'classified_ads:item_update'  i.id  %}">edit</a>
                    <a href="{% url 'classified_ads:item_delete'  i.id  %}">delete</a>
                {% endif %}
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<div class="pagination">
    <span class="step-links">
        {% if items.has_previous %}
            <a href="?{%if search%}search={{ search }}&{% endif%}page=">&laquo; first</a>
            <a href="?{%if search%}search={{ search }}&{% endif%}page={{ items.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ items.number }} of {{ items.paginator.num_pages }}.
        </span>

        {% if items.has_next %}
            <a href="?{%if search%}search={{ search }}&{% endif%}page={{ items.next_page_number }}">next</a>
            <a href="?{%if search%}search={{ search }}&{% endif%}page={{ items.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock %}
